name: Automated tests

on:
  pull_request:
    branches: [main]

env:
  DATABASE_URL: postgres://root:mysecretpassword@localhost:5432/local
  WHATSAPP_URL: http://localhost:8080
  WHATSAPP_API_KEY: 9f86d081884c7d659a2feaa0c55ad01a
  WHATSAPP_WEBHOOK: https://teste.com.br
  PROXY_HOST: proxyhost
  PROXY_PORT: 80
  PROXY_PROTOCOL: http
  PROXY_USERNAME: username
  PROXY_PASSWORD: password

jobs:
  vitest:
    name: Running Vitest
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 'lts/jod'
      - run: npm ci
      - run: npm test
